## spa前后端分离，实现dva构建的前端应用与thinkphp构建的后台应用的整合问题

### 如何整合

`说明`： 最开始只是想用react和thinkphp来实现，之前thinkphp是采用view来展示界面，通过与controller的方法名称相同，则自动展示。现在遇到了问题，就是我用react框架dva，开发的时候搭建的dora服务器，入口文件为src/index.js，而thinkphp下的是index.php，项目入口文件及类型都不同，怎么让项目成功运行起来呢。

`解决过程`： 想的第一个办法： 让thinkphp后台调用前端临时的index.html文件，作为入口文件。这样失败了，因为前端develop时的临时文件路径，与后台controller方法名不相同，不能直接调用，明确指向调用也会因为跨域而失败。第二个方法： 从网上查找资料，react常用来开发spa应用，而spa应用的最大优点就是前后端分离，再次尝试，成功了。

`实现方法`：将整个项目作为spa应用，前后端隔离开发，请求数据都通过ajax，thinkphp后台只作为数据服务器，不用再管前端的渲染等处理逻辑。

### 如何实现开发时跨域

`说明`： 实现了前后端分离后，产生了一个问题：开发的时候，前端应用服务器与后台应用服务器启动冲突；前端应用服务器采用的是8111端口，后端服务器采用的是8900端口，如何实现他们的通信呢？虽然最后部署的时候不用管，因为已经放到同一源路径下了，不存在跨域。

`解决过程`： 服务器占用端口重复；跨域： 查看浏览器报错，发现服务器端需要设置 response header，接收跨域

`实现方法`：

修改2者应用端口，将dora前端应用服务器端口修改为8111，apache 服务器端口修改为 8900，修改config配置文件；

跨域在php中设置代码： `
header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept");`

## js技术难点

`说明`： 在需要对拥有同一个dom父节点的部分子节点进行属性设置时，如何减少重绘。因为对部分子节点设置的属性，如 `disabled` 会引起重绘。

`解决过程`: 1.向年级前端群提问

`实现方法`: 1. 将这个父节点隐藏，等设置完所有属性时，再把它给显示出来。但是这会引起2此回流，所以如果需要设置的子节点数量较少时，还是不用这个方法，一些较大的回流会导致页面的重新渲染。